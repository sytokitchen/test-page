<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–°—ã—Ç–æ kitchen</title>
  <style>
    :root{
      --off-black:#1F2421;
      --dark-olive:#4B5311;
      --olive-metallic:#4A4F39;
      --dark-wood:#3E2F23;
      --accent:#D4AF37;
      --text:#f5f5f5;
      --header-h:72px;
    }
    html{scroll-behavior:smooth;}
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:Arial, sans-serif;
      background:var(--off-black);
      color:var(--text);
      overflow-x:hidden;
    }

    header{
      position:fixed; top:0; left:0; right:0; z-index:2000;
      height:var(--header-h); background:var(--dark-wood);
    }
    .header-inner{
      max-width:1100px; margin:0 auto; height:100%;
      padding:12px 22px; display:flex; align-items:center; justify-content:space-between; gap:16px;
    }
    .brand h1{margin:0; color:var(--accent); font-size:22px; letter-spacing:.5px; white-space:nowrap}
    nav{position:relative}
    .menu-toggle{
      display:none; align-items:center; justify-content:center;
      width:44px; height:44px; border-radius:10px; border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06); color:#fff; font-size:20px; line-height:1; cursor:pointer;
    }
    nav ul{list-style:none; display:flex; gap:12px; margin:0; padding:0; flex-wrap:wrap;}
    nav a{
      display:inline-block; padding:8px 12px; border-radius:10px; text-decoration:none; color:#fff; font-weight:600;
      background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08);
    }
    nav a:hover{background:rgba(255,255,255,0.15);}
    .btn{
      background:var(--dark-olive); color:#fff; padding:10px 16px;
      border-radius:10px; border:none; cursor:pointer; font-weight:bold;
    }
    .btn:hover{background:var(--olive-metallic);}

    main{margin:0; padding:0;}
    .hero, .section{scroll-margin-top:calc(var(--header-h) + 14px);}

    .hero{margin-top:var(--header-h);}
    .hero-figure{position:relative; width:100%; line-height:0; margin:0;}
    .hero-figure img{width:100%; height:auto; display:block;}

    .text-panel{
      position:absolute; inset:0; display:flex; align-items:center; justify-content:center; z-index:2;
      padding:0 20px; line-height:normal;
    }
    .text-box{
      max-width:860px; padding:16px 18px; border-radius:14px;
      background:rgba(0,0,0,0.38); backdrop-filter:saturate(120%) blur(2px);
      line-height:1.4;
    }
    .hero h2{margin:0 0 14px 0; color:#fff; font-size:clamp(30px,5vw,56px); font-weight:800; line-height:1.15;}
    .hero p{margin:0; color:#fff; font-size:clamp(16px,2.2vw,22px); line-height:1.55;}

    .section{
      padding:60px 20px;
      max-width:1000px;
      margin:0 auto;
    }
    .section h3{text-align:center; font-size:2em; color:var(--accent); margin-bottom:24px;}
    .grid{display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:16px;}
    .card{
      background:rgba(0,0,0,0.25);
      border:1px solid rgba(255,255,255,0.1);
      border-radius:16px;
      padding:16px;
      box-shadow:0 4px 12px rgba(0,0,0,0.25);
    }
    .card h4{margin:0 0 8px; color:var(--accent);}
    .muted{color:#e7d6c8; opacity:.95;}
    footer{text-align:center; background:var(--dark-wood); color:var(--accent); padding:15px;}

    /* –ü—Ä–µ–¥–∑–∞–∫–∞–∑ - —Ñ–æ—Ä–º–∞ */
    #preorder{
      background:rgba(0,0,0,0.18);
      border-radius:18px;
      margin-top:20px;
      margin-bottom:40px;
    }
    .preorder-intro{
      text-align:left;
      font-size:18px;
      line-height:1.8;
      max-width:860px;
      margin:0 auto 24px;
    }
    .preorder-form{
      max-width:720px;
      margin:0 auto;
      display:grid;
      gap:16px;
    }
    .preorder-row{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .preorder-row label{
      font-size:15px;
      font-weight:600;
    }
    .preorder-row input,
    .preorder-row textarea{
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(0,0,0,0.3);
      color:var(--text);
      font-size:15px;
      font-family:inherit;
    }
    .preorder-row input::placeholder,
    .preorder-row textarea::placeholder{
      color:rgba(245,245,245,0.6);
    }
    .preorder-row small{
      font-size:13px;
      opacity:0.8;
    }
    .preorder-actions{
      margin-top:6px;
      display:flex;
      justify-content:flex-start;
    }

    /* –ê—É–¥–∏–æ-–∑–∞–ø–∏—Å—å */
    .audio-controls{
      display:flex;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }
    .audio-status{
      font-size:14px;
      opacity:0.9;
    }
    .btn-secondary{
      background:rgba(255,255,255,0.1);
      border:1px solid rgba(255,255,255,0.25);
    }
    .btn-secondary:hover{
      background:rgba(255,255,255,0.2);
    }

    /* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –¥–ª—è –±–ª–æ–∫–∞ "–î–æ—Å—Ç–∞–≤–∫–∞" */
    #delivery{
      border-top:1px solid rgba(255,255,255,0.06);
      padding-top:40px;
      margin-top:10px;
    }

    @media (max-width: 860px){
      .menu-toggle{display:flex}
      nav ul{
        position:absolute; top:calc(100% + 10px); right:0; left:auto;
        display:flex; flex-direction:column; gap:10px;
        background:rgba(33,33,33,.96); border:1px solid rgba(255,255,255,.12);
        border-radius:14px; padding:12px; width:min(86vw, 320px);
        transform:scale(.98); opacity:0; pointer-events:none;
        transition:opacity .18s ease, transform .18s ease;
      }
      nav.open ul{opacity:1; transform:scale(1); pointer-events:auto}
      nav a{width:100%; text-align:left}
    }

    @media (max-width: 540px){
      .text-box{max-width:92%; padding:14px 16px;}
    }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="brand"><h1>–°—ã—Ç–æ kitchen</h1></div>
      <nav aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
        <button class="menu-toggle" aria-expanded="false" aria-label="–ú–µ–Ω—é">‚â°</button>
        <ul>
          <li><a href="#home">–ì–ª–∞–≤–Ω–∞—è</a></li>
          <li><a href="#about">–û –Ω–∞—Å</a></li>
          <li><a href="#preorder">–ü—Ä–µ–¥–∑–∞–∫–∞–∑</a></li>
          <li><a href="#delivery">–î–æ—Å—Ç–∞–≤–∫–∞</a></li>
          <li><a href="#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
          <li><a class="btn" href="#order">–ó–∞–∫–∞–∑–∞—Ç—å</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="home">
    <section class="hero" aria-label="–ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ">
      <figure class="hero-figure">
        <img src="photo_main1.jpg" alt="–ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ">
        <div class="text-panel">
          <div class="text-box">
            <h2>–ö—É—Ä—ã –≥—Ä–∏–ª—å –∏ —Å–≤–µ–∂–∞—è –¥–æ–º–∞—à–Ω—è—è –∫—É—Ö–Ω—è</h2>
            <p>–ú—ã –≥–æ—Ç–æ–≤–∏–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∏–∑ —Å–≤–µ–∂–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤: –∫—É—Ä—ã –≥—Ä–∏–ª—å, –º—è—Å–æ, –≥–∞—Ä–Ω–∏—Ä—ã –∏ —Å–∞–ª–∞—Ç—ã. –í—Å—ë –ø—Ä–æ—Å—Ç–æ –∏ –≤–∫—É—Å–Ω–æ ‚Äî –∫–∞–∫ –¥–æ–º–∞. –î–æ—Å—Ç–∞–≤–∫–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å –ï–¥—É.</p>
          </div>
        </div>
      </figure>
    </section>

    <section id="about" class="section">
      <h3>–û –Ω–∞—Å</h3>
      <p style="text-align:left; font-size:18px; line-height:1.8; max-width:860px; margin:0 auto;">
        <strong>–°—ã—Ç–æ kitchen</strong> ‚Äî –¥–æ–º–∞—à–Ω—è—è –∫—É—Ö–Ω—è —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –≤–∫—É—Å. –ú—ã –∑–∞–∫—É–ø–∞–µ–º –ø—Ä–æ–¥—É–∫—Ç—ã
        –Ω–µ–±–æ–ª—å—à–∏–º–∏ –ø–∞—Ä—Ç–∏—è–º–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å —Å–≤–µ–∂–∏–º–∏. –ú—è—Å–æ –º–∞—Ä–∏–Ω—É–µ–º –∏ –≥–æ—Ç–æ–≤–∏–º –Ω–∞ –≥—Ä–∏–ª–µ, –≥–∞—Ä–Ω–∏—Ä—ã –∏ —Å–∞–ª–∞—Ç—ã
        –¥–µ–ª–∞–µ–º –∑–∞—Ä–∞–Ω–µ–µ –Ω–µ–±–æ–ª—å—à–∏–º–∏ –ø–∞—Ä—Ç–∏—è–º–∏ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è.
      </p>
      <p style="text-align:left; font-size:18px; line-height:1.8; max-width:860px; margin:18px auto 0;">
        –ù–∞—à–µ –º–µ–Ω—é –ø—Ä–æ—Å—Ç–æ–µ –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ: –∫—É—Ä—ã –≥—Ä–∏–ª—å —Å –∑–æ–ª–æ—Ç–∏—Å—Ç–æ–π –∫–æ—Ä–æ—á–∫–æ–π, –∞—Ä–æ–º–∞—Ç–Ω—ã–µ –º—è—Å–Ω—ã–µ –±–ª—é–¥–∞, —Å—ã—Ç–Ω—ã–µ –≥–∞—Ä–Ω–∏—Ä—ã –∏ —Å–≤–µ–∂–∏–µ —Å–∞–ª–∞—Ç—ã.
        –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –º—ã —Å—Ç–∞—Ä–∞–µ–º—Å—è –≥–æ—Ç–æ–≤–∏—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —É –≤–∞—Å –≤—Å–µ–≥–¥–∞ –±—ã–ª –≤—ã–±–æ—Ä –≤–∫—É—Å–Ω—ã—Ö –∏ –¥–æ–º–∞—à–Ω–∏—Ö –±–ª—é–¥ –¥–ª—è –æ–±–µ–¥–∞ –∏–ª–∏ —É–∂–∏–Ω–∞.
        –ú—ã —Ü–µ–Ω–∏–º –≤–∞—à–µ –≤—Ä–µ–º—è –∏ —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –µ–¥–∞ —Ä–∞–¥–æ–≤–∞–ª–∞ –≤–∞—Å –∏ –≤–∞—à—É —Å–µ–º—å—é.
      </p>
    </section>

    <section id="preorder" class="section">
	  <h3>–ü—Ä–µ–¥–∑–∞–∫–∞–∑</h3>
	  <p class="preorder-intro">
		–û—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–µ–¥–∑–∞–∫–∞–∑, –∏ –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –≤—Å—ë –∫ –Ω—É–∂–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏. –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∂–µ–ª–∞–µ–º—ã–µ –±–ª—é–¥–∞ –∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.
	  </p>
	  <form id="preorder-form" class="preorder-form">
		<div class="preorder-row">
		  <label for="preorder-name">–§–ò–û</label>
		  <input id="preorder-name" name="name" type="text" required />
		</div>

		<div class="preorder-row">
		  <label for="preorder-phone">–¢–µ–ª–µ—Ñ–æ–Ω (–†–æ—Å—Å–∏—è)</label>
		  <input
			id="preorder-phone"
			name="phone"
			type="tel"
			inputmode="tel"
			required
			placeholder="+7 (___) ___-__-__"
		  />
		  <small>–ú—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–∏–º —Å–∫–æ–±–∫–∏ –∏ –¥–µ—Ñ–∏—Å—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ +7 (XXX) XXX-XX-XX.</small>
		</div>

		<div class="preorder-row">
		  <label for="preorder-date">–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞</label>
		  <input
			id="preorder-date"
			name="date"
			type="text"
			required
			placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É"
		  />
		</div>

		<div class="preorder-row">
		  <label for="preorder-comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
		  <textarea
			id="preorder-comment"
			name="comment"
			rows="3"
			style="overflow:hidden; resize:none;"
			placeholder="–û–ø–∏—à–∏—Ç–µ –∂–µ–ª–∞–µ–º—ã–µ –±–ª—é–¥–∞, –≤—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–ª–∏ –¥—Ä—É–≥–∏–µ –¥–µ—Ç–∞–ª–∏."
		  ></textarea>
		</div>

		<div class="preorder-row">
		  <label>–ì–æ–ª–æ—Å–æ–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–ø–æ –∂–µ–ª–∞–Ω–∏—é)</label>
		  <div class="audio-controls">
			<button type="button" class="btn btn-secondary" id="audio-record-btn">–ó–∞–ø–∏—Å–∞—Ç—å</button>
			<span class="audio-status" id="audio-status">–ó–∞–ø–∏—Å—å –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞</span>
		  </div>
		  <small>–ó–∞–ø–∏—Å—å –¥–æ ~2 –º–∏–Ω—É—Ç. –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö (Chrome, Edge, –º–æ–±–∏–ª—å–Ω—ã–µ –Ω–∞ Android –∏ —Ç.–ø.).</small>
		</div>

		<div class="preorder-actions">
		  <button type="submit" class="btn" id="preorder-submit-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–µ–¥–∑–∞–∫–∞–∑</button>
		</div>
	  </form>
	</section>


    <section id="delivery" class="section">
      <h3>–î–æ—Å—Ç–∞–≤–∫–∞</h3>
      <div class="grid">
        <div class="card">
          <h4>–Ø–Ω–¥–µ–∫—Å –ï–¥–∞</h4>
          <p class="muted">–ë—ã—Å—Ç—Ä–∞—è –∏ —É–¥–æ–±–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ ‚Äî –≥–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞ –ø—Ä–∏–µ–∑–∂–∞—é—Ç –≤ —Ç–µ—Ä–º–æ—É–ø–∞–∫–æ–≤–∫–µ.</p>
        </div>
        <div class="card">
          <h4>–°–∞–º–æ–≤—ã–≤–æ–∑</h4>
          <p class="muted">–°–¥–µ–ª–∞–π—Ç–µ –∑–∞–∫–∞–∑ –∑–∞—Ä–∞–Ω–µ–µ –∏ –∑–∞–±–µ—Ä–∏—Ç–µ –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è.</p>
        </div>
        <div class="card">
          <h4>–û–ø–ª–∞—Ç–∞</h4>
          <p class="muted">–ù–∞–ª–∏—á–Ω—ã–µ, –∫–∞—Ä—Ç–∞ –∏–ª–∏ –æ–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞.</p>
        </div>
      </div>
    </section>

    <section id="order" class="section">
      <h3>–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑</h3>
      <p style="text-align:center; max-width:720px; margin:0 auto 18px;" class="muted">
        –í—ã–±–∏—Ä–∞–π—Ç–µ –±–ª—é–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ¬´–Ø–Ω–¥–µ–∫—Å –ï–¥–∞¬ª –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ ‚Äî –º—ã —Å–æ–±–µ—Ä—ë–º –∑–∞–∫–∞–∑ –¥–ª—è –≤–∞—Å.
      </p>
      <div style="text-align:center; margin-top:8px;">
        <a class="btn" href="#contact">–°–≤—è–∑–∞—Ç—å—Å—è</a>
      </div>
    </section>

    <section id="contact" class="section" style="background:#1F2421;">
      <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
      <p style="text-align:center; font-size:18px;">üìç –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ö—É–¥—Ä–æ–≤–æ, —É–ª. –°—Ç—Ä–æ–∏—Ç–µ–ª–µ–π, 16</p>
      <p style="text-align:center; font-size:18px;">üìû +7 (950) 037-13-96</p>
      <p style="text-align:center; font-size:18px;">üïí –ï–∂–µ–¥–Ω–µ–≤–Ω–æ 11:00 ‚Äî 22:00</p>
      <div style="margin-top:20px; border-radius:14px; overflow:hidden; border:1px solid rgba(255,255,255,0.12);">
        <iframe title="Yandex Map ‚Äî –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ö—É–¥—Ä–æ–≤–æ, —É–ª. –°—Ç—Ä–æ–∏—Ç–µ–ª–µ–π, 16" src="https://yandex.com/map-widget/v1/?mode=search&z=15&text=%D0%A1%D0%B0%D0%BD%D0%BA%D1%82-%D0%9F%D0%B5%D1%82%D0%B5%D1%80%D0%B1%D1%83%D1%80%D0%B3%2C%20%D0%9A%D1%83%D0%B4%D1%80%D0%BE%D0%B2%D0%BE%2C%20%D1%83%D0%BB%D0%B8%D1%86%D0%B0%20%D0%A1%D1%82%D1%80%D0%BE%D0%B8%D1%82%D0%B5%D0%BB%D0%B5%D0%B9%2C%2016" width="100%" height="430" frameborder="0" allowfullscreen></iframe>
      </div>
    </section>
  </main>

  <footer>¬© 2025 –°—ã—Ç–æ kitchen. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</footer>

  <script>
  // –ü–æ–¥–≥–æ–Ω—è–µ–º –≤—ã—Å–æ—Ç—É —Ö—ç–¥–µ—Ä–∞
  const hdr = document.querySelector('header');
  function syncHeaderHeight(){
    const h = hdr ? hdr.offsetHeight : 0;
    document.documentElement.style.setProperty('--header-h', h + 'px');
  }
  window.addEventListener('load', syncHeaderHeight);
  window.addEventListener('resize', syncHeaderHeight);

  // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
  const nav = document.querySelector('header nav');
  const btn = document.querySelector('.menu-toggle');
  const links = nav.querySelectorAll('a');

  function closeMenu(){ nav.classList.remove('open'); btn.setAttribute('aria-expanded','false'); }
  btn.addEventListener('click', e => {
    e.stopPropagation();
    const opened = nav.classList.toggle('open');
    btn.setAttribute('aria-expanded', opened ? 'true' : 'false');
  });
  document.addEventListener('click', e => { if(!nav.contains(e.target)) closeMenu(); });
  document.addEventListener('keydown', e => { if(e.key === 'Escape') closeMenu(); });
  links.forEach(link => link.addEventListener('click', closeMenu));

  // ===== –ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ +7 (XXX) XXX-XX-XX =====
  const phoneInput = document.getElementById('preorder-phone');
  if (phoneInput) {
    phoneInput.addEventListener('input', () => {
      let digits = phoneInput.value.replace(/\D/g, '');

      // –µ—Å–ª–∏ –≤–≤–µ–ª–∏ 8 -> –º–µ–Ω—è–µ–º –Ω–∞ 7
      if (digits.startsWith('8')) digits = '7' + digits.slice(1);
      if (!digits.startsWith('7')) digits = '7' + digits; // –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º +7
      digits = digits.slice(0, 11); // –º–∞–∫—Å–∏–º—É–º 11 —Ü–∏—Ñ—Ä (7 + 10)

      let result = '+7';
      if (digits.length > 1) {
        result += ' (' + digits.slice(1, 4);
        if (digits.length >= 4) result += ')';
        if (digits.length > 4) result += ' ' + digits.slice(4, 7);
        if (digits.length > 7) result += '-' + digits.slice(7, 9);
        if (digits.length > 9) result += '-' + digits.slice(9, 11);
      }

      phoneInput.value = result;
    });

    // –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ, –µ—Å–ª–∏ –ø–æ–ª–µ –ø—É—Å—Ç–æ–µ ‚Äî —Å—Ä–∞–∑—É —Å—Ç–∞–≤–∏–º "+7 "
    phoneInput.addEventListener('focus', () => {
      if (!phoneInput.value.trim()) {
        phoneInput.value = '+7 ';
      }
    });
  }

  // ===== –ê–≤—Ç–æ-resize textarea =====
  const commentArea = document.getElementById('preorder-comment');
  function autoResize(el) {
    el.style.height = 'auto';
    el.style.height = el.scrollHeight + 'px';
  }
  if (commentArea) {
    autoResize(commentArea);
    commentArea.addEventListener('input', () => autoResize(commentArea));
  }

  // ===== –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π date-picker (flatpickr) =====
  const dateInput = document.getElementById('preorder-date');
  if (dateInput && typeof flatpickr !== 'undefined') {
    flatpickr(dateInput, {
      dateFormat: 'd.m.Y',
      minDate: 'today'
      // –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ª–æ–∫–∞–ª—å ru –æ—Ç–¥–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å
    });
  }

  // ===== –ê—É–¥–∏–æ-–∑–∞–ø–∏—Å—å =====
  const recordBtn = document.getElementById('audio-record-btn');
  const statusEl = document.getElementById('audio-status');
  let mediaRecorder = null;
  let audioChunks = [];
  let recordedBlob = null;
  let isRecording = false;

  async function startRecording() {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      mediaRecorder = new MediaRecorder(stream);
      audioChunks = [];
      mediaRecorder.ondataavailable = (e) => {
        if (e.data && e.data.size > 0) audioChunks.push(e.data);
      };
      mediaRecorder.onstop = () => {
        if (audioChunks.length > 0) {
          recordedBlob = new Blob(audioChunks, { type: 'audio/webm' });
          const seconds = Math.round(recordedBlob.size / 16000); // –≥—Ä—É–±–∞—è –æ—Ü–µ–Ω–∫–∞
          statusEl.textContent = '–ó–∞–ø–∏—Å—å –≥–æ—Ç–æ–≤–∞ (–ø—Ä–∏–º–µ—Ä–Ω–æ ' + seconds + ' —Å–µ–∫.)';
        } else {
          statusEl.textContent = '–ó–∞–ø–∏—Å—å –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞';
          recordedBlob = null;
        }
      };
      mediaRecorder.start();
      isRecording = true;
      recordBtn.textContent = '–°—Ç–æ–ø';
      statusEl.textContent = '–ò–¥—ë—Ç –∑–∞–ø–∏—Å—å...';
    } catch (err) {
      console.error(err);
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞.');
    }
  }

  function stopRecording() {
    if (mediaRecorder) {
      mediaRecorder.stop();
      mediaRecorder.stream.getTracks().forEach(t => t.stop());
      mediaRecorder = null;
    }
    isRecording = false;
    recordBtn.textContent = '–ó–∞–ø–∏—Å–∞—Ç—å';
  }

  if (recordBtn) {
    recordBtn.addEventListener('click', () => {
      if (!isRecording) startRecording();
      else stopRecording();
    });
  }

  // ===== –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –Ω–∞ Cloudflare Worker =====
  const preorderForm = document.getElementById('preorder-form');
  const submitBtn = document.getElementById('preorder-submit-btn');

  const WORKER_URL = 'https://syto-preorder.syto-kitchen.workers.dev'

  if (preorderForm) {
    preorderForm.addEventListener('submit', async function (e) {
      e.preventDefault();

      const formData = new FormData(preorderForm);
      if (recordedBlob) {
        formData.append('voice', recordedBlob, 'comment.webm');
      }

      submitBtn.disabled = true;
      submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º...';

      try {
        const response = await fetch(WORKER_URL, {
          method: 'POST',
          body: formData
        });

        if (response.ok) {
          alert('–°–ø–∞—Å–∏–±–æ! –ü—Ä–µ–¥–∑–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω.');
          preorderForm.reset();
          recordedBlob = null;
          if (statusEl) statusEl.textContent = '–ó–∞–ø–∏—Å—å –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞';
          if (commentArea) autoResize(commentArea);
        } else {
          console.error('–û—Ç–≤–µ—Ç –≤–æ—Ä–∫–µ—Ä–∞:', await response.text());
          alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.');
        }
      } catch (err) {
        console.error(err);
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–µ–¥–∑–∞–∫–∞–∑';
      }
    });
  }
</script>

</body>
</html>
